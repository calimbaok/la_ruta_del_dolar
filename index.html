<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>La Ruta del DÃ³lar â€” Ushuaia â†’ Alaska</title>
  <link rel="stylesheet" href="./styles/styles.css" />
  <!-- Mapbox GL JS (v3 estable, CDN unpkg) -->
  <link href="https://unpkg.com/mapbox-gl@3.1.2/dist/mapbox-gl.css" rel="stylesheet" />
</head>

<body>
  <!-- NAV LIGERA -->
  <header class="nav">
    <div class="container nav__inner">
      <div class="brand">ğŸš La Ruta del DÃ³lar</div>
      <a href="#donar" class="btn btn--primary btn--sm btn-donate">Comprar 1 km</a>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero" style="background-image: url('https://res.cloudinary.com/giseares/image/upload/v1648061296/m59nkjgl4nq065i0s94qda7iql3k.jpg');">
    <video class="hero__video" autoplay muted loop playsinline poster="https://res.cloudinary.com/giseares/image/upload/v1648061296/m59nkjgl4nq065i0s94qda7iql3k.jpg">
      <source src="./images/Calimba.mp4" type="video/mp4">
      Tu navegador no soporta video HTML5.
    </video>

    <div class="hero__overlay"></div>
    <div class="container hero__content">
      <h1>De Ushuaia a Alaska, dÃ³lar a dÃ³lar</h1>
      <p>
        Cada kilÃ³metro que compras pone el motor un poco mÃ¡s cerca del Ãrtico.
        Tu nombre queda en el mapa. Tu mensaje viaja con nosotros.
      </p>
      <button id="donateBtn" class="btn btn--primary btn--lg btn-donate" aria-labelledby="cta-label">
        Comprar 1 km
      </button>
      <span id="cta-label" class="sr-only">Comprar un kilÃ³metro simbÃ³lico por 1 USD</span>
    </div>
  </section>



  <!-- PROGRESO -->
  <section class="section section--contrast" id="progreso">
    <div class="container">
      <h2>Progreso del viaje</h2>
      <p class="kicker">Meta: 12 000 USD</p>

      <div class="progress">
        <div id="progress-bar" class="progress__bar" style="width: 0%"></div>
      </div>
      <p class="progress__numbers">
        <span id="amount">0</span> / <span id="goal">12000</span> km
      </p>

      <div class="perks">
        <div class="perk">
          <div class="perk__badge">1â€“5 km</div>
          <p>Tu nombre en el mapa</p>
        </div>
        <div class="perk">
          <div class="perk__badge">10 km</div>
          <p>Sticker â€œYo buceÃ© con Calimbaâ€</p>
        </div>
        <div class="perk">
          <div class="perk__badge">50 km</div>
          <p>Agradecimiento en video</p>
        </div>
      </div>
    </div>
  </section>

  <!-- MAPA -->
  <section class="section" id="mapa">
    <div class="container">
      <h2>Mapa de donantes</h2>
      <p class="kicker">
        Cada tramo pintado representa kilÃ³metros financiados por alguien que se sumÃ³ al viaje ğŸ’š
      </p>
      <div id="map" class="map"></div>
    </div>
  </section>

  <section class="section" id="juego">
    <div class="container">
      <div id="ruta-infinita-wrapper">
        <h2>ğŸ® Ruta Infinita</h2>
        <p class="kicker">EsquivÃ¡ obstÃ¡culos mientras avanzÃ¡s hacia Alaska ğŸš</p>

        <canvas id="gameCanvas" width="700" height="350"></canvas>

        <div class="score-display">
          KilÃ³metros: <span id="scoreValue">0</span> km
        </div>

        <div class="game-info">UsÃ¡ â†‘ o ESPACIO para saltar</div>

        <div id="donateAfterCrash">
          <p class="crash-text">ğŸ’¥ Â¡La combi chocÃ³!</p>
          <button id="retryBtn" class="retry-btn">ğŸ”„ Reintentar</button>
          <button id="donateBtnGame" class="donate-btn btn-donate">ğŸ’ Donar kilÃ³metros</button>
        </div>
      </div>
    </div>
  </section>


  <!-- DONAR (ANCLA SIMPLE) -->
  <section class="section section--panel" id="donar" aria-labelledby="donar-title">
    <div class="container panel">
      <div class="panel__content">
        <h2 id="donar-title">Haz tu aporte</h2>
        <p>Por ahora este botÃ³n estÃ¡ en modo demo. Cuando conectemos la pasarela de pago, te llevarÃ¡ directo a donar y tu pin aparecerÃ¡ en el mapa.</p>
      </div>
      <div class="panel__cta">
        <button id="donarDemo" class="btn btn--secondary">Probar donaciÃ³n demo</button>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container footer__inner">
      <p>Â© 2025 La Ruta del DÃ³lar</p>
      <nav class="footer__nav">
        <a href="#progreso">Progreso</a>
        <a href="#mapa">Mapa</a>
        <a href="#donar">Donar</a>
      </nav>
    </div>
  </footer>

  <!-- Mapbox GL JS (v3 estable, CDN unpkg) -->
  <script src="https://unpkg.com/mapbox-gl@3.1.2/dist/mapbox-gl.js"></script>
  <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="./main.js" defer></script>
  <script src="./juego_ruta.js"></script>

  <!-- Scripts de navegaciÃ³n de donaciones -->
  <script>
    document.querySelectorAll(".btn-donate").forEach(btn => {
      btn.addEventListener("click", (e) => {
        e.preventDefault();
        window.location.href = "./donar.html";
      });
    });
  </script>

</body>
</html>
